## Q&A

M means What?, 全新的项目:?

> MicroService小子. EduExchM是在前者EduExch之上的海纳百川的项目, 校园物品交易平台完全可以做大做强, 做成类似学习帮的效果:有社区, 有购物, 有交易等.
> EduExchM将在更新并修复EduExch的基础上引入实习时候的思考并优化拓展功能


为什么这次没有前端仓库了?

> 前端人员跑路了, 同时之前的后端接口和这个基本一致, 等前端开发完也能用, 就不另创了


为什么升级微服务拖延了这么久?

> 很简单, 我当时不会... 主要的精力放在了攻克单体难关, 微服务没动, 直到7月才开始. 9月出师, 10月头整理并复盘结束


为什么不上线?

> 麻烦, 没意义. 上线是运维干的, 后端只需要做好本职工作即可


未来的打算

> 把自己新学的东西加进来就欧米铜佛了! 遗留下来的shit mount太多了越来越难改了

## 流程

### **用户篇**

> 用户(消费者) - 找东西 - 看首页, 找到了 - 进入浏览, 加入购物队列(车) - 货比三家, 字段搜索 - 回到购物车选择发起Ask请求 - 等待接受, 下线 - 提示已经得到接受 -
> 被迫同意进一步转微信沟通 - Battle完毕, 回到菜单选择: I'm sure! - 订单确认生成打开, 展示收款码 - 货到付款模式 - 当面交付. 选择"我已完成交易", 订单关闭, 写入数据库持久化.

用户点击应用/网页, 首先看到的是首页的轮播图, 里面是商家上传的被平台置顶的物品. 往下拉能看到排名, "热度值, 就是最抢手的商品", 然后是趋势排名, 代表付费用户用于提升搜索权重的量排名

再然后是一些无关的排行榜, 例如"积分排行榜", 展示通过成功的交易积攒了最多积分的人. (积分机制后续实现不迟, 但是要先加字段)

用户找到了一个满意的交换品(这里有许多途径, 通过分类(category), 通过直接搜索, 通过用户搜索, 通过首页排行榜进入等, 还有公告进入), 找到对应商品页面后, (页面就模仿淘宝那样也好,
直接上面轮播展示图片List集合, 下面是作者描述和一些基础信息), 可以选择交互:

购物车, 收藏页面, 或是直接发起交易

发起交易就直接显示等待回复即可. 这时候我们可以在下面的四个按钮外新增一个"打开的订单", 或者说是"订单", 商家那边和用户这边就会同步出现一个打开的订单对象. 点击页面后查看双方的订单,
查看Ask - Accept(请求响应), 需要双方都确认订单后订单才会进入进行中, 这里充分考虑了C - C的场景: 用户和商家是平等的, 顾客不是上帝, 双方应该是平等的进行 双方同意后开启交易

例如什么情况: 卖家发现这个买家存在多次差评情况(也就是被批评了, 积分扣光), 那么商家有权利不通过请求, 直接挂起订单或者选择"不同意, 并屏蔽"选项, 类似QQ好友关系的建立.

双方都确认开始订单后, 一些不需要太在意的小东西, 或者双方都知道是什么的了(例如, "一叠草纸", 这就没什么Argue的必要了), 就直接转到 - 货到付款环节, 订单保持开启, 等待买家收货和卖家收款按钮都被按下后,
订单关闭, 可以进行评价等操作, 写入日志.

如果是大东西, 例如ipad这种, 就需要双方进行进一步交流了. 我的理念很简单: 做一个产品, 我们就专注一个功能: 打通双方消息渠道, 可以不负责金钱交易部分内容, 也可以不负责双方Argue内容.

于是最基础实现是展示双方联系方式, 引导通过其他聊天软件进行沟通(例如带临时消息的QQ, Telegram等, 邮件也可以). 他们会自己搞定后面的事情的, 我们只知道结果就好: 干还是不干? 干, 就接着上面的,
不干拉倒, 同时可以进行评价等功能


---

### **商家篇**

> 用户(生产者) - + 商品 - 上传必要信息 - 使用卷来加速和展示 - 等待人来DD, 下线 - 交换基础信息 - 提示接受Accept请求 - 手动选择进一步转微信沟通 -Battle完毕, 回到菜单选择: I'm sure! -
> 订单确认生成打开, 等待买家付款 - 货到付款模式 - 当面交付. 选择"我已完成交易", 订单关闭, 写入数据库持久化.

> 无论是商家还是用户, 其本体都是一个对象: 用户. 也就是说, 只有一种人实体对象: 用户, 不是人的就是管理员了. 利用用户来关联其"购买表", "商品表"

用户选择卖出东西时, 他就临时转变为了商家. 商家出售东西时, 先要在列表选择对应的商品种类和描述, 上传图片(可以不上传), 然后要求完善个人信息. 之后可以选择使用卷 = 整点什么时候通过领取得到,
可以提升搜索权重, 在查询时候可以排序靠前(排序), 同时能进入首页排行榜. 充钱是能让你变强的, 尤其是你发现几乎没有人来搜索你的东西的时候, 付出一些中介费就很必要.

对, 我们就是黑中介, 就靠这个吃饭了.

然后就是等待商品表生成了. 这里可以在屏幕展示进度条(后续). 之后就是坐等... (这里是要人工审核的)

等到了, 和上面一样进行....

### Postman

直接访问网关即可9999

记得手动同步导入导出

设置两个Env, 一个存管理端, 一个存用户端, 需要时候切换环境. 然后在测试鉴权项目选择Bearer方式

测试使用插件convert to JSON, 直接把要传进来的对象转换为JSON.

### Swagger

网关gateway 9999

```java
不可访问
```

[管理admin](http://localhost:10082/swagger-ui/index.html#/)    10082

```java
http://localhost:10082/swagger-ui/index.html#/
```

[用户guest](http://localhost:10083/swagger-ui/index.html#/)    10083

```java
http://localhost:10083/swagger-ui/index.html#/
```

[物资supply](http://localhost:10084/swagger-ui/index.html#/)    10084

```java
http://localhost:10084/swagger-ui/index.html#/
```

[交易trade](http://localhost:10085/swagger-ui/index.html#/)    10085

```java
http://localhost:10085/swagger-ui/index.html#/
```
